<html>

<head>
    <script src="pixi.min.js"></script>
    <script src="pixi.js"></script>
    <meta charset="utf-8">

</head>
<style>
    body {
        position: absolute;
        margin: 0 auto;
        overflow: hidden;
    }

</style>

<body>
    <iframe src="background.mp3" allow="autoplay" style="display:none" id="iframeAudio">
    </iframe>
     <audio src="background.mp3" id="background"></audio>
    <script>
        var app = new PIXI.Application({
            width: 1920,
            height: 1080,
            antialias: true,
            forceCanvas: false
        }); //設定圖層
        document.body.appendChild(app.view); //顯示

        var container = new PIXI.Container();
        app.stage.addChild(container);

        //遊戲背景
        var ratio = Math.min(window.innerWidth, window.innerHeight);
        var backgroundimg = PIXI.Sprite.from("牛郎織女2/遊戲背景/遊戲主畫面背景.png");
        backgroundimg.width = ratio;
        backgroundimg.height = ratio;
        backgroundimg.anchor.set(0.5);
        container.addChild(backgroundimg);
        //logo
        var logo = new PIXI.Sprite.from("牛郎織女2/遊戲背景/LOGO.png");
        logo.anchor.set(0.5);
        logo.position.set(0, -100);
        logo.scale.set(0.8, 0.8);
        logo.visible = false;
        backgroundimg.addChild(logo);
        
          //控制背景音樂
        /*判斷手機系統是Android還是IOS*/
     if (navigator.userAgent.match(/(iphone|ipad|ipod);?/i)) {
            var music_btn = new PIXI.Sprite.from("play.png");
            music_btn.anchor.set(0.5);
            music_btn.position.set(-650, -450);
            music_btn.scale.set(0.2, 0.2);
            backgroundimg.addChild(music_btn);
            music_btn.interactive = true;
            music_btn.buttonMode = true;
            music_btn.mouseover = function(mouseData) {
                this.alpha = 0.8;
            }
            music_btn.mouseout = function(mouseData) {
                this.alpha = 1;
            }

            music_btn.on("pointerdown", playmusic);
        } 
        function playmusic() {
            background.play();
        }

        //開始按鈕
        var circle = new PIXI.Sprite.from("牛郎織女2/遊戲背景/開始遊戲.png");
        circle.anchor.set(0.5);
        circle.scale.set(0.5, 0.5);
        circle.position.set(0, 250);
        circle.visible = false;
        backgroundimg.addChild(circle);
        // Opt-in to interactivity
        circle.interactive = true;
        // Shows hand cursor
        circle.buttonMode = true;
        // Pointers normalize touch and mouse
        circle.on('pointerdown', onClick);
        circle.mouseover = function(mouseData) {
            this.alpha = 0.8;
        }
        circle.mouseout = function(mouseData) {
            this.alpha = 1;
        }

        container.addChild(circle);


        function onClick() {

            location.href = "video.html";
        }

        //注意事項
        var mention = new PIXI.Graphics();
        mention.beginFill(0xFFFFFF);
        mention.alpha = 0.3;
        mention.anchor = 0.5;
        mention.drawRect(-950, -550, 1920, 1080);
        mention.endFill();
        backgroundimg.addChild(mention);

        const style = new PIXI.TextStyle({
            fontVariant: "Noto Sans TC",
            fontWeight: "bold",
            fill: "#CC0000",
        });
        var mention_text = new PIXI.Text("請\t將\t網\t址\t複\t製\t到\tChrome 開\t啟\n\n點\t任 一\t處\t進\t入\t遊\t戲\t開\t始\t畫\t面", style);

        mention_text.x = -250;
        mention_text.y = -50;
        mention_text.scale.set(3, 3);
        backgroundimg.addChild(mention_text);
        mention.interactive = true;
        mention.on("pointerdown", close_mention);

        function close_mention() {

            circle.visible = true;
            logo.visible = true;
            mention.visible = false;
            mention_text.visible = false;

        }

        //保持遊戲全螢幕
        window.addEventListener('resize', resize);

        function resize() {
            app.renderer.resize(window.innerWidth, window.innerHeight);
            container.x = app.screen.width / 2;
            container.y = app.screen.height / 2;
            container.anchor = 0.5;
        }
        resize();

    </script>
</body>


</html>
