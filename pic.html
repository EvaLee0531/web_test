<html>

<head>
    <script src="pixi.min.js"></script>

</head>
<style>
    body {
        position: absolute;
        margin: 0 auto;
        overflow: hidden;

    }

    div {
        position: absolute;
        margin: 0, auto;
        overflow: hidden;
    }

</style>

<body>
    <div>
        <script>
            const app = new PIXI.Application({
                autoResize: true,
                resolution: devicePixelRatio,
                backgroundColor: 0xD8BFD8,
            });
            document.body.appendChild(app.view);
            const container = new PIXI.Container();
            app.stage.addChild(container);
            // Move container to the center
            container.x = app.screen.width / 2;
            container.y = app.screen.height / 2;
            // Center bunny sprite in local container coordinates
            container.pivot.x = container.width / 2;
            container.pivot.y = container.height / 2;

            // Create a new texture
            const texture = PIXI.Texture.from('umbrella.png');
            const texture2 = PIXI.Texture.from('sun.png');
            const texture3 = PIXI.Texture.from('play.png');
            const pic = new PIXI.Sprite(texture);
            const pic2 = new PIXI.Sprite(texture3);
            pic.anchor.set(0.5); //設置圖片在中間
            pic2.anchor.set(0.5);
            pic2.scale.x = 0.25;
            pic2.scale.y = 0.25;


            pic2.interactive = true;
            pic2.buttonMode = true;
            pic2.visible = false;
            container.addChild(pic);
            container.addChild(pic2);



            //計時器動畫旋轉
            app.ticker.add((delta) => {

                pic.rotation += 0.01 * delta;
                pic.scale.x -= 0.01 * delta;
                pic.scale.y -= 0.01 * delta;
                if (pic.scale.x < 0 || pic.scale.y < 0) {
                    pic.texture = texture2;

                }
                if (pic.scale.x < -0.5 || pic.scale.y < -0.5) {
                    pic.alpha -= .01;

                }
                if (pic.alpha <= 0) {

                    pic.visible = false;
                    pic2.visible = true;
                    pic2.on('pointerdown', onClick);

                    function onClick() {
                        PIXI.loaders.Resource.setExtensionLoadType('mp4', PIXI.loaders.Resource.LOAD_TYPE.VIDEO);
                        pic2.destroy();
                        // create a video texture from a path
                        var texture = PIXI.Texture.fromVideo('Normal start.mp4');

                        // create a new Sprite using the video texture (yes it's that easy)
                        var videoSprite = new PIXI.Sprite(texture);

                        // Stetch the fullscreen
                        videoSprite.width = app.screen.width;
                        videoSprite.height = app.screen.height;

                        app.stage.addChild(videoSprite);
                        animate();
                        
                        function animate()
                        {
                            app.render(container);
                            requestAnimationFrame(animate);
                        }


                        /*  const movframes = ["img/spritesheet-0.png", "img/spritesheet-1.png", "img/spritesheet-2.png", "img/spritesheet-3.png", "img/spritesheet-4.png", "img/spritesheet-5.png", "img/spritesheet-6.png", "img/spritesheet-7.png", "img/spritesheet-8.png", "img/spritesheet-9.png","img/spritesheet-10.png"];
                        PIXI.loader.add(movframes).load(setup);

                        function setup() {
                            let resources = PIXI.loader.resources;
                            let animatedmov = PIXI.extras.AnimatedSprite.fromFrames(movframes);
                            app.stage.addChild(animatedmov);
                            animatedmov.position.set(300);
                            animatedmov.anchor.set(0.5);
                            animatedmov.scale.x = 0.5;
                            animatedmov.scale.y = 0.5;
                            animatedmov.animationSpeed = 0.25;
                            // animatedmov.onLoop=true;
                            animatedmov.play();
                        }*/

                    }


                }
            });

        </script>


    </div>


</body>

</html>
